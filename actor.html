<!DOCTYPE html>
<html data-theme="dark" lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Permissions-Policy" content="autoplay=(self), encrypted-media=(self), accelerometer=(self), gyroscope=(self), picture-in-picture=(self), clipboard-write=(self), web-share=(self)"/>
    <meta name="referrer" content="strict-origin-when-cross-origin"/>
    <meta name="description" content="Oyuncu bilgileri ve filmografisi. Cine Search'te oyuncularÄ±n tÃ¼m filmlerini keÅŸfedin."/>
    <meta name="keywords" content="oyuncu, aktÃ¶r, filmografi, sinema"/>
    <meta name="robots" content="index, follow"/>
    <link rel="canonical" href="https://cinesearch.fetihakgun.com/actor.html"/>
    <meta property="og:type" content="profile"/>
    <meta property="og:title" content="Cine Search - Oyuncu"/>
    <meta property="og:description" content="Oyuncu bilgileri ve filmografisi. TÃ¼m filmlerini keÅŸfedin."/>
    <meta property="og:url" content="https://cinesearch.fetihakgun.com/actor.html"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="/main.css" rel="stylesheet" type="text/css">
    <script src="/app.js" defer></script>
    <title>Cine Search - Oyuncu</title>
</head>
<body>
    <nav class="navbar" id="mainNav">
        <div class="nav-container">
            <a class="navbar-brand" href="/index.html">
                <span class="brand-text">Cine Search</span>
            </a>
            <div class="navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/index.html" data-translate="movies">Filmler</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/diziler.html" data-translate="series">Diziler</a>
                    </li>
                </ul>
                <div class="nav-controls">
                    <form action="/search.html" class="search-form">
                        <input class="form-control" type="search" name="query" data-translate-placeholder="searchPlaceholder" placeholder="Film Ara" aria-label="Search"/>
                        <input type="hidden" name="page" value="1"/>
                        <input type="hidden" name="type" value="movie"/>
                        <button class="btn btn-outline-primary" type="submit" data-translate="search">
                            <i class="fas fa-search"></i>
                        </button>
                    </form>
                    <button class="theme-toggle" type="button" title="Toggle Theme">
                        <i class="fas fa-moon theme-icon"></i>
                    </button>
                    <div class="language-selector">
                        <select>
                            <option value="tr">TR</option>
                            <option value="en">EN</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Bottom Navigation -->
    <div class="mobile-bottom-nav">
        <div class="mobile-bottom-nav-items">
            <a href="/index.html" class="mobile-bottom-nav-item">
                <i class="fas fa-home"></i>
                <span data-translate="movies">Filmler</span>
            </a>
            <a href="/diziler.html" class="mobile-bottom-nav-item">
                <i class="fas fa-tv"></i>
                <span data-translate="series">Diziler</span>
            </a>
            <button class="mobile-bottom-nav-item mobile-nav-control" type="button" id="mobileSearchButton">
                <i class="fas fa-search"></i>
                <span data-translate="search">Ara</span>
            </button>
            <button class="mobile-bottom-nav-item mobile-nav-control" type="button" id="mobileThemeToggle" title="Toggle Theme">
                <i class="fas fa-moon theme-icon"></i>
                <span data-translate="theme">Tema</span>
            </button>
            <div class="mobile-bottom-nav-item mobile-nav-control mobile-language-item">
                <div class="mobile-language-button" id="mobileLanguageButton">
                    <span id="mobileLanguageText">TR</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="mobile-language-dropdown" id="mobileLanguageDropdown">
                    <div class="mobile-language-option" data-lang="tr">TR</div>
                    <div class="mobile-language-option" data-lang="en">EN</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Search Modal -->
    <div class="mobile-search-modal" id="mobileSearchModal">
        <div class="mobile-search-overlay" id="mobileSearchOverlay"></div>
        <div class="mobile-search-container">
            <div class="mobile-search-header">
                <h3 data-translate="search">Ara</h3>
                <button class="mobile-search-close" id="mobileSearchClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="mobile-search-form" id="mobileSearchForm">
                <div class="mobile-search-input-wrapper">
                    <i class="fas fa-search"></i>
                    <input type="search" class="mobile-search-input" id="mobileSearchInput" data-translate-placeholder="searchPlaceholder" placeholder="Film Ara" autofocus/>
                </div>
                <div class="mobile-search-type-selector">
                    <label class="mobile-search-type-option">
                        <input type="radio" name="searchType" value="movie" checked/>
                        <span data-translate="movies">Filmler</span>
                    </label>
                    <label class="mobile-search-type-option">
                        <input type="radio" name="searchType" value="tv"/>
                        <span data-translate="series">Diziler</span>
                    </label>
                </div>
                <button type="submit" class="mobile-search-submit">
                    <i class="fas fa-search"></i>
                    <span data-translate="search">Ara</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Actor Info Section -->
    <div class="actor-hero-section">
        <div class="actor-info-card" id="actorInfoCard">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
        </div>
    </div>

    <!-- Movies Section -->
    <div class="content-section">
        <div class="content-row fade-in">
            <h2 class="row-title" data-translate="actorMovies">Oyuncunun Filmleri</h2>
            <div class="movies-list" id="movies-list">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = '1b44088d28f43962ed16e614f60cbbd1';
        const IMAGE_BASE = 'https://image.tmdb.org/t/p/w500';
        const BASE_URL = 'https://api.themoviedb.org/3';
        
        function createSlug(title) {
            if (!title) return '';
            return title
                .toLowerCase()
                .replace(/ÄŸ/g, 'g')
                .replace(/Ã¼/g, 'u')
                .replace(/ÅŸ/g, 's')
                .replace(/Ä±/g, 'i')
                .replace(/Ã¶/g, 'o')
                .replace(/Ã§/g, 'c')
                .replace(/[^a-z0-9]+/g, '-')
                .replace(/^-+|-+$/g, '');
        }
        
        function createDetailUrl(id, type, title) {
            const slug = createSlug(title);
            const typePath = type === 'movie' ? 'film' : 'dizi';
            return `${typePath}/${id}${slug ? '-' + slug : ''}`;
        }

        function getActorIdFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return parseInt(urlParams.get('actor')) || 11;
        }

        async function getActorDetails(actorID) {
            const apiLang = window.languageManager ? window.languageManager.getApiLanguage() : 'tr-TR';
            const url = `${BASE_URL}/person/${actorID}?api_key=${API_KEY}&language=${apiLang}`;
            
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok.');
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching actor details:', error);
                return null;
            }
        }

        async function getMoviesByActorID(actorID) {
            const apiLang = window.languageManager ? window.languageManager.getApiLanguage() : 'tr-TR';
            const url = `${BASE_URL}/person/${actorID}/movie_credits?api_key=${API_KEY}&language=${apiLang}`;
            
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok.');
                }
                const data = await response.json();
                return data.cast || [];
            } catch (error) {
                console.error('Error fetching movies:', error);
                return [];
            }
        }

        function displayActorInfo(actor) {
            const card = document.getElementById('actorInfoCard');
            if (!actor) {
                card.innerHTML = '<p>Oyuncu bilgileri yÃ¼klenemedi.</p>';
                return;
            }

            const profile = actor.profile_path 
                ? `${IMAGE_BASE}${actor.profile_path}` 
                : '';
            
            const knownFor = actor.known_for_department || 'Bilinmiyor';
            const birthday = actor.birthday || 'Bilinmiyor';
            const placeOfBirth = actor.place_of_birth || 'Bilinmiyor';
            const biography = actor.biography || 'Biyografi bulunamadÄ±.';
            
            card.innerHTML = `
                <div class="actor-info-wrapper">
                    <div class="actor-profile-image">
                        ${profile ? 
                            `<img src="${profile}" alt="${actor.name}" onerror="this.onerror=null; this.style.background='linear-gradient(135deg, #2563eb 0%, #0ea5e9 100%)'; this.style.display='flex'; this.style.alignItems='center'; this.style.justifyContent='center'; this.innerHTML='<span style=\\'font-size:80px;opacity:0.7\\'>ðŸ‘¤</span>'">` 
                            : `<div style="background: linear-gradient(135deg, #2563eb 0%, #0ea5e9 100%); width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 80px; opacity: 0.7;">ðŸ‘¤</div>`
                        }
                    </div>
                    <div class="actor-details">
                        <h1 class="actor-name">${actor.name || 'Ä°simsiz'}</h1>
                        <div class="actor-meta">
                            <div class="actor-meta-item">
                                <i class="fas fa-star"></i>
                                <span>${knownFor}</span>
                            </div>
                            ${birthday !== 'Bilinmiyor' ? `
                            <div class="actor-meta-item">
                                <i class="fas fa-calendar"></i>
                                <span>${birthday}</span>
                            </div>
                            ` : ''}
                            ${placeOfBirth !== 'Bilinmiyor' ? `
                            <div class="actor-meta-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${placeOfBirth}</span>
                            </div>
                            ` : ''}
                        </div>
                        ${biography !== 'Biyografi bulunamadÄ±.' ? `
                        <div class="actor-biography">
                            <h3>Biyografi</h3>
                            <p>${biography.length > 500 ? biography.substring(0, 500) + '...' : biography}</p>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;

            // If no profile path, set placeholder manually
            if (!actor.profile_path && profile) {
                const img = card.querySelector('img');
                if (img) {
                    img.style.background = 'linear-gradient(135deg, #2563eb 0%, #0ea5e9 100%)';
                    img.style.display = 'flex';
                    img.style.alignItems = 'center';
                    img.style.justifyContent = 'center';
                    img.innerHTML = '<span style="font-size:80px;opacity:0.7">ðŸ‘¤</span>';
                }
            }
        }

        function displayMovies(movies) {
            const container = document.getElementById('movies-list');
            if (!movies || movies.length === 0) {
                container.innerHTML = '<p>Film bulunamadÄ±.</p>';
                return;
            }

            container.innerHTML = '';
            container.style.display = 'grid';
            container.style.gridTemplateColumns = 'repeat(auto-fill, minmax(220px, 1fr))';
            container.style.gap = '25px';
            container.style.padding = '20px 0';

            movies.forEach((movie, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                
                const poster = movie.poster_path 
                    ? `${IMAGE_BASE}${movie.poster_path}` 
                    : '';
                
                const title = movie.title || movie.name || 'Ä°simsiz';
                const overview = movie.overview || 'AÃ§Ä±klama bulunamadÄ±.';
                const rating = movie.vote_average ? (movie.vote_average / 2).toFixed(1) : 'N/A';
                
                card.innerHTML = `
                    <img src="${poster}" alt="${title}" class="card-img-top" onerror="this.onerror=null; this.style.background='linear-gradient(135deg, #2563eb 0%, #0ea5e9 100%)'; this.style.display='flex'; this.style.alignItems='center'; this.style.justifyContent='center'; this.innerHTML='<span style=\\'font-size:64px;opacity:0.7\\'>ðŸŽ¬</span>'">
                    <a href="/${createDetailUrl(movie.id, 'movie', title)}">
                        <div class="overlay">
                            <h3>${title}</h3>
                            <p>${overview.length > 150 ? overview.substring(0, 150) + '...' : overview}</p>
                            <p><i class="fas fa-star" style="color: #ffd700;"></i> ${rating}</p>
                        </div>
                    </a>
                `;
                
                container.appendChild(card);
                
                // If no poster path, set placeholder manually
                if (!movie.poster_path) {
                    const img = card.querySelector('img');
                    if (img) {
                        img.style.background = 'linear-gradient(135deg, #2563eb 0%, #0ea5e9 100%)';
                        img.style.display = 'flex';
                        img.style.alignItems = 'center';
                        img.style.justifyContent = 'center';
                        img.innerHTML = '<span style="font-size:64px;opacity:0.7">ðŸŽ¬</span>';
                    }
                }
                
                // Trigger animation with delay
                setTimeout(() => {
                    card.classList.add('visible');
                }, index * 50);
            });
        }

        async function loadActorPage() {
            const actorID = getActorIdFromURL();
            
            // Load actor details
            const actor = await getActorDetails(actorID);
            displayActorInfo(actor);
            
            // Load movies
            const movies = await getMoviesByActorID(actorID);
            displayMovies(movies);
        }

        // Reload content when language changes
        function reloadPageContent() {
            loadActorPage();
        }

        window.addEventListener('languageChanged', reloadPageContent);

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            loadActorPage();
            
            // Mobile menu toggle

            // Navbar scroll effect
            let lastScroll = 0;
            const navbar = document.getElementById('mainNav');
            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                if (currentScroll > 100) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
                lastScroll = currentScroll;
            });
        });
    </script>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-left">
                <p class="footer-copyright">Â© 2025 Cine Search. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
            </div>
            <div class="footer-right">
                <span class="footer-developer">Developed by Fetih</span>
                <a href="https://github.com/FetihAkgun" target="_blank" rel="noopener noreferrer" class="footer-github">
                    <i class="fab fa-github"></i>
                    <span>GitHub</span>
                </a>
            </div>
        </div>
    </footer>
</body>
</html>
